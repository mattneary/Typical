<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Typical by mattneary</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Typical</h1>
        <p>Strict typing for JavaScript.</p>
        <p class="view"><a href="https://github.com/mattneary/Typical">View the Project on GitHub <small>mattneary/Typical</small></a></p>
        <ul>
          <li><a href="https://github.com/mattneary/Typical/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/mattneary/Typical/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/mattneary/Typical">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="typical" class="anchor" href="#typical"><span class="octicon octicon-link"></span></a>Typical</h1>

<p>Typical provides strict typing to JavaScript functions. Here's a quick 
example:</p>

<div class="highlight highlight-javascript"><pre><span class="nx">fact</span> <span class="o">=</span> <span class="nx">T</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">x</span><span class="o">*</span><span class="nx">fact</span><span class="p">(</span><span class="nx">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">},</span> <span class="nb">Number</span><span class="p">,</span> <span class="nb">Number</span><span class="p">)</span>
</pre></div>

<p>The argument and return types of the function <code>fact</code> will now be checked,
and if not numeric, will throw an error. Here's what an error looks
like:</p>

<div class="highlight highlight-sh"><pre>Error: Expected argument at index 0 of anonymous to be of <span class="nb">type </span>Number.
</pre></div>

<p>An additional benefit of typed functions is that they get partial application
for free. For example:</p>

<div class="highlight highlight-javascript"><pre><span class="nx">sum</span> <span class="o">=</span> <span class="nx">T</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="p">},</span> <span class="nb">Number</span><span class="p">,</span> <span class="nb">Number</span><span class="p">,</span> <span class="nb">Number</span><span class="p">)</span>
<span class="nx">plus3</span> <span class="o">=</span> <span class="nx">sum</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

<p>Supported types include <code>Number</code>, <code>String</code>, <code>Boolean</code>, object types, sum 
and product types which we will discuss further later, list and 
key-value types, and function types.</p>

<p>The primary motivation for Typical is to bring type-checking to the dynamic
language of JavaScript. Why? Type checking removes the possibility of an entire
class of bugs, and, additionally, provides the coder with a more clear view
of the problem which his function solves. The type system of Typical is
ambitious, aiming to mirror Haskell in some regards, and is still a work in
progress.</p>

<h2>
<a name="getting-started" class="anchor" href="#getting-started"><span class="octicon octicon-link"></span></a>Getting Started</h2>

<h3>
<a name="types" class="anchor" href="#types"><span class="octicon octicon-link"></span></a>Types</h3>

<p>Types are provided as class constructors, like <code>Number</code>, <code>String</code>, or 
<code>MyClass</code> or as data types and algebraic types can either be formed by passing 
multiple types to a data-type constructor, e.g., <code>T.Data(Number, String)</code>,
or by making sum types of the form <code>a | b</code> with <code>T.Enum(a, b, ...)</code>. Recursive
types can be defined using <code>T.Circular</code> and functions without return values
can be defined using <code>T.void</code>. Additional types can also be derived by wrapping
types in lists of key-value pairs, e.g., <code>{name:String}</code> or <code>[Number]</code>.
Here's how derived types can be used:</p>

<div class="highlight highlight-javascript"><pre><span class="nx">fold</span> <span class="o">=</span> <span class="nx">T</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="nx">xs</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">xs</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span>
<span class="p">},</span> <span class="nx">T</span><span class="p">([</span><span class="nb">Number</span><span class="p">,</span> <span class="nb">Number</span><span class="p">,</span> <span class="nb">Number</span><span class="p">]),</span> <span class="p">[</span><span class="nb">Number</span><span class="p">],</span> <span class="nb">Number</span><span class="p">)</span>
</pre></div>

<h3>
<a name="algebraic-types" class="anchor" href="#algebraic-types"><span class="octicon octicon-link"></span></a>Algebraic Types</h3>

<p>Typical supports product and sum types, by means of <code>T.Data</code> and <code>T.Enum</code>,
respectively. A sum type is a sort of type union, allowing any of its
addend types, which are constructed with <code>T.Data</code>, to be considered of its type. 
A product type joins the data held by multiple types into a single package. 
Additionally, a data constructor can be defined inline with an enumerable type. 
For example:</p>

<div class="highlight highlight-javascript"><pre><span class="nx">Node</span> <span class="o">=</span> <span class="nx">T</span><span class="p">.</span><span class="nx">Enum</span><span class="p">(</span><span class="nx">T</span><span class="p">.</span><span class="nx">Data</span><span class="p">(</span><span class="s2">"Node"</span><span class="p">,</span> <span class="nb">Number</span><span class="p">,</span> <span class="nx">T</span><span class="p">.</span><span class="nx">Circular</span><span class="p">),</span> <span class="nx">T</span><span class="p">.</span><span class="nx">Data</span><span class="p">(</span><span class="s2">"Empty"</span><span class="p">,</span> <span class="nx">T</span><span class="p">.</span><span class="k">void</span><span class="p">))</span>
<span class="kd">function</span> <span class="nx">lisp</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span> <span class="nx">x</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="k">return</span> <span class="nx">T</span><span class="p">.</span><span class="nx">Data</span><span class="p">(</span><span class="s2">"Empty"</span><span class="p">)(</span><span class="kc">null</span><span class="p">)</span>
  <span class="k">return</span> <span class="nx">T</span><span class="p">.</span><span class="nx">Data</span><span class="p">(</span><span class="s2">"Node"</span><span class="p">)(</span><span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">lisp</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<span class="p">}</span>
<span class="nx">T</span><span class="p">(</span><span class="nx">lisp</span><span class="p">,</span> <span class="p">[</span><span class="nb">Number</span><span class="p">],</span> <span class="nx">Node</span><span class="p">)</span>
</pre></div>

<p>Note the ability of the data type to be defined recursively upon the entire
type. This is a foundation for the creation of arbitrary data structures. A
data type is a contructor used to couple data. All sum types (made by <code>T.Enum</code>)
must consist exclusively of data types. Data types are built and used in one
of the two ways which follow.</p>

<div class="highlight highlight-javascript"><pre><span class="nx">Person</span> <span class="o">=</span> <span class="nx">T</span><span class="p">.</span><span class="nx">Data</span><span class="p">(</span><span class="nb">Number</span><span class="p">,</span> <span class="nb">String</span><span class="p">)</span>
<span class="nx">Person</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"Matt"</span><span class="p">)</span>
</pre></div>

<div class="highlight highlight-javascript"><pre><span class="nx">T</span><span class="p">.</span><span class="nx">Data</span><span class="p">(</span><span class="s2">"Person"</span><span class="p">,</span> <span class="nb">Number</span><span class="p">,</span> <span class="nb">String</span><span class="p">)</span>
<span class="nx">T</span><span class="p">.</span><span class="nx">Data</span><span class="p">(</span><span class="s2">"Person"</span><span class="p">)(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"Matt"</span><span class="p">)</span>
</pre></div>

<p>When it comes time to extract data from these algebraic types, pattern matching
can be used.</p>

<h3>
<a name="pattern-matching" class="anchor" href="#pattern-matching"><span class="octicon octicon-link"></span></a>Pattern Matching</h3>

<p>When aiming to make a polymorphic function which will extract the data from
a sum type, the <code>T.Match</code> function can be used. The following is an example of
method delegation.</p>

<div class="highlight highlight-javascript"><pre><span class="nx">num</span> <span class="o">=</span> <span class="nx">T</span><span class="p">.</span><span class="nx">Match</span><span class="p">([</span><span class="nx">NumOrStr</span><span class="p">,</span> <span class="nb">Number</span><span class="p">,</span> <span class="nb">Number</span><span class="p">],</span>
              <span class="p">[</span><span class="nb">String</span><span class="p">,</span> <span class="nb">Number</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="o">+</span><span class="nx">y</span> <span class="p">},</span>
              <span class="p">[</span><span class="nb">Number</span><span class="p">,</span> <span class="nb">Number</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span><span class="o">+</span><span class="nx">y</span> <span class="p">})</span>
</pre></div>

<h3>
<a name="function-types" class="anchor" href="#function-types"><span class="octicon octicon-link"></span></a>Function Types</h3>

<p>You will, inevitably, wish to have a function accept another function as
argument. In this case, you will need a means of defining a function's type.
The function <code>T</code> constructs a function type-class when passed an array. For example,
the following forms the type of a function from <code>Number</code> to <code>String</code>.</p>

<div class="highlight highlight-javascript"><pre><span class="nx">Stringify</span> <span class="o">=</span> <span class="nx">T</span><span class="p">([</span><span class="nb">Number</span><span class="p">,</span> <span class="nb">String</span><span class="p">])</span>
</pre></div>

<p>This type can then be used both as a constructor of typed functions and as
a type for function signatures. Here is an example of a function type at use:</p>

<div class="highlight highlight-javascript"><pre><span class="nx">map</span> <span class="o">=</span> <span class="nx">T</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="nx">xs</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">xs</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="p">},</span> <span class="nx">T</span><span class="p">([</span><span class="nb">Number</span><span class="p">,</span> <span class="nb">Number</span><span class="p">]),</span> <span class="p">[</span><span class="nb">Number</span><span class="p">],</span> <span class="p">[</span><span class="nb">Number</span><span class="p">])</span>
<span class="nx">f</span> <span class="o">=</span> <span class="nx">T</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span><span class="o">+</span><span class="mi">1</span> <span class="p">},</span> <span class="nb">Number</span><span class="p">,</span> <span class="nb">Number</span><span class="p">)</span>
</pre></div>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/mattneary">mattneary</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>